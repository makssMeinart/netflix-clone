{"ast":null,"code":"import _slicedToArray from\"/home/makss99/Desktop/react/practice/netflix-clone/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{useState,useEffect,useContex,useContext}from\"react\";import{FirebaseContext}from\"../context/firebase\";export default function useAuthListener(){// userState should pull up the authUser from localStorage\nvar _useState=useState(JSON.parse(localStorage.getItem(\"authUser\"))),_useState2=_slicedToArray(_useState,2),user=_useState2[0],setUser=_useState2[1];var _useContext=useContext(FirebaseContext),firebase=_useContext.firebase;useEffect(function(){var listener=firebase.auth().onAuthStateChanged(function(authUser){if(authUser){localStorage.setItem(\"authUser\",JSON.stringify(authUser));setUser(authUser);}else{localStorage.removeItem(\"authUser\");setUser(null);}});// clean the listener\nreturn function(){return listener();};},[]);return{user:user};}","map":{"version":3,"sources":["/home/makss99/Desktop/react/practice/netflix-clone/src/hooks/use-auth-listener.js"],"names":["useState","useEffect","useContex","useContext","FirebaseContext","useAuthListener","JSON","parse","localStorage","getItem","user","setUser","firebase","listener","auth","onAuthStateChanged","authUser","setItem","stringify","removeItem"],"mappings":"yKAAA,OAASA,QAAT,CAAmBC,SAAnB,CAA8BC,SAA9B,CAAyCC,UAAzC,KAA0D,OAA1D,CACA,OAASC,eAAT,KAAgC,qBAAhC,CAEA,cAAe,SAASC,CAAAA,eAAT,EAA2B,CACxC;AACA,cAAwBL,QAAQ,CAACM,IAAI,CAACC,KAAL,CAAWC,YAAY,CAACC,OAAb,CAAqB,UAArB,CAAX,CAAD,CAAhC,wCAAOC,IAAP,eAAaC,OAAb,eAEA,gBAAqBR,UAAU,CAACC,eAAD,CAA/B,CAAQQ,QAAR,aAAQA,QAAR,CAEAX,SAAS,CAAC,UAAM,CACd,GAAMY,CAAAA,QAAQ,CACZD,QAAQ,CACPE,IADD,GAECC,kBAFD,CAEoB,SAAAC,QAAQ,CAAI,CAC9B,GAAGA,QAAH,CAAa,CACXR,YAAY,CAACS,OAAb,CAAqB,UAArB,CAAiCX,IAAI,CAACY,SAAL,CAAeF,QAAf,CAAjC,EACAL,OAAO,CAACK,QAAD,CAAP,CACD,CAHD,IAIK,CACHR,YAAY,CAACW,UAAb,CAAwB,UAAxB,EACAR,OAAO,CAAC,IAAD,CAAP,CACD,CACF,CAXD,CADF,CAcE;AACA,MAAO,kBAAME,CAAAA,QAAQ,EAAd,EAAP,CACH,CAjBQ,CAiBN,EAjBM,CAAT,CAmBA,MAAO,CAAEH,IAAI,CAAJA,IAAF,CAAP,CACD","sourcesContent":["import { useState, useEffect, useContex, useContext} from \"react\"\nimport { FirebaseContext } from \"../context/firebase\"\n\nexport default function useAuthListener() {\n  // userState should pull up the authUser from localStorage\n  const [user, setUser] = useState(JSON.parse(localStorage.getItem(\"authUser\")))\n\n  const { firebase } = useContext(FirebaseContext) \n\n  useEffect(() => {\n    const listener = \n      firebase\n      .auth()\n      .onAuthStateChanged(authUser => {\n        if(authUser) {\n          localStorage.setItem(\"authUser\", JSON.stringify(authUser))\n          setUser(authUser)\n        }\n        else {\n          localStorage.removeItem(\"authUser\")\n          setUser(null)\n        }\n      })\n\n      // clean the listener\n      return () => listener()\n  }, [])\n\n  return { user }\n}"]},"metadata":{},"sourceType":"module"}